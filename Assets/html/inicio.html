
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/inicio-general.css">
    <link rel="stylesheet" href="../css/Estilos-inicio.css">
    <link rel="stylesheet" href="../css/estilosRegistro.css">
    <title>Chronogest - Crear Horarios</title>
</head>
<body>
    
<header>
    <nav>
        <a href="#" class="active">Inicio</a>
        <a href="../../index.html">Salir</a>
    </nav>
            <!-- Sección de información del usuario -->
<div class="perfil-container">
        <!-- Activador de perfil de usuario -->
        <input type="checkbox" id="activarPerfil">
        <label for="activarPerfil" class="perfil-toggle">
            <img src="../img/OIP.jpeg" alt="Perfil de Usuario">
        </label>
        <!-- Información del perfil (oculta por defecto) -->
        <div id="contenidoPerfil">
            <div class="perfil-info">
                <h4>Perfil de usuario</h4>
                <p id="nombreUsuario"></p>
                <p id="rolUsuario"></p>
                <p id="correoUsuario"></p>
            </div>
        </div>
</header>   
<!-- Tu estructura de navegación actual -->
    <div class="container">
    <section class="permisos-section">
            <div id="menuPermisos">
                <div class="menu-container">
                    <div class="main-container">
        <!-- Menú lateral -->
        <div class="sidebar">
            <ul class="sidebar-menu">
<!-- Sección para ver la lista de usuarios -->
<section class="ver-usuarios">
    <h2>Lista de Usuarios</h2>
    <div class="checkbox-container">
        <input type="checkbox" id="activarListaU" class="checkbox-input">
        <label for="activarListaU" class="checkbox-label">Ver</label>
    </div>
    <ul id="usuariosList" class="usuarios-lista"></ul>
</section> 
    
    <section class="permisos-section">
            <h2>Modulos de Chronogest</h2>
            <div id="menuPermisos">
                <div class="menu-container">
                    <!-- Crear horarios -->
                    <div class="menu-item" data-permiso="crearhorarios">
                        <div class="menu-header">
                            Crear Horarios
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <!-- Área de contenido principal -->
        <div class="content-area">
        <div class="header">
        <h1>Creacion de horarios</h1>
    </div>
    
    <div class="toolbar">
        <button class="toolbar-button" id="newScheduleBtn">
            <i>📅</i> Crear nuevo horario
        </button>
    <div class="course-panel">
        <table class="course-table">
            <tr>
                <td><label for="courseName">Nombre del curso:</label></td>
                <td><label>Días:</label></td>
                <td><label for="startTime">Desde:</label></td>
                <td><label for="endTime">Hasta:</label></td>
                <td><label for="courseColor">Color:</label></td>
                <td></td>
            </tr>
            <tr>
                <td><input type="text" id="courseName" class="form-control"></td>
                <td class="days-cell">
                    <input type="checkbox" id="dayL"> <label for="dayL">L</label>
                    <input type="checkbox" id="dayK"> <label for="dayK">K</label>
                    <input type="checkbox" id="dayM"> <label for="dayM">M</label>
                    <input type="checkbox" id="dayJ"> <label for="dayJ">J</label>
                    <input type="checkbox" id="dayV"> <label for="dayV">V</label>
                    <input type="checkbox" id="dayS"> <label for="dayS">S</label>
                    <input type="checkbox" id="dayD"> <label for="dayD">D</label>
                </td>
                <td>
                    <select id="startTime" class="form-control">
                        <option value="" disabled selected>---</option>
                        <option value="7">7:00</option>
                        <option value="8">8:00</option>
                        <option value="9">9:00</option>
                        <option value="10">10:00</option>
                        <option value="11">11:00</option>
                        <option value="12">12:00</option>
                        <option value="13">13:00</option>
                        <option value="14">14:00</option>
                        <option value="15">15:00</option>
                        <option value="16">16:00</option>
                        <option value="17">17:00</option>
                    </select>
                </td>
                <td>
                    <select id="endTime" class="form-control">
                        <option value="" disabled selected>---</option>
                        <option value="8">8:00</option>
                        <option value="9">9:00</option>
                        <option value="10">10:00</option>
                        <option value="11">11:00</option>
                        <option value="12">12:00</option>
                        <option value="13">13:00</option>
                        <option value="14">14:00</option>
                        <option value="15">15:00</option>
                        <option value="16">16:00</option>
                        <option value="17">17:00</option>
                        <option value="18">18:00</option>
                    </select>
                </td>
                <td>
                    <input type="color" id="courseColor" class="color-picker" value="#3498db">
                </td>
                <td>
                    <button id="addCourseBtn" class="btn-add">Agregar</button>
                </td>
            </tr>
        </table>
    </div>
    
    <div class="schedule-container">
        <table class="schedule-table" id="scheduleTable">
            <thead>
                <tr>
                    <th>Horas</th>
                    <th>(L) Lunes</th>
                    <th>(K) Martes</th>
                    <th>(M) Miércoles</th>
                    <th>(J) Jueves</th>
                    <th>(V) Viernes</th>
                    <th>(S) Sábado</th>
                    <th>(D) Domingo</th>
                </tr>
            </thead>
            <tbody id="scheduleBody">
                <!-- Horas generadas dinámicamente -->
            </tbody>
        </table>
    </div>
    <script>
        // Inicializar variables
        let courses = [];
        const daysOfWeek = ['L', 'K', 'M', 'J', 'V', 'S', 'D'];
        
        // Generar tabla de horarios
        function generateTimeTable() {
            const scheduleBody = document.getElementById('scheduleBody');
            scheduleBody.innerHTML = '';
            
            // Crear filas para cada hora desde 7 hasta 18
            for (let hour = 7; hour < 18; hour++) {
                const row = document.createElement('tr');
                
                // Celda de hora
                const timeCell = document.createElement('td');
                timeCell.className = 'time-cell';
                timeCell.textContent = `${hour}:00 - ${hour+1}:00`;
                row.appendChild(timeCell);
                
                // Celdas para cada día de la semana
                for (let day = 0; day < 7; day++) {
                    const dayCell = document.createElement('td');
                    dayCell.dataset.day = daysOfWeek[day];
                    dayCell.dataset.hour = hour;
                    row.appendChild(dayCell);
                }
                
                scheduleBody.appendChild(row);
            }
        }
        
        // Renderizar cursos en la tabla
        function renderCourses() {
            // Limpiar todas las celdas de la tabla
            const dayCells = document.querySelectorAll('#scheduleBody td:not(.time-cell)');
            dayCells.forEach(cell => {
                cell.innerHTML = '';
                cell.style.backgroundColor = '';
            });
            
            // Renderizar cada curso
            courses.forEach(course => {
                course.days.forEach(day => {
                    for (let hour = course.startTime; hour < course.endTime; hour++) {
                        const cell = document.querySelector(`td[data-day="${day}"][data-hour="${hour}"]`);
                        if (cell) {
                            const courseItem = document.createElement('div');
                            courseItem.className = 'course-item';
                            courseItem.textContent = course.name;
                            courseItem.style.backgroundColor = course.color;
                            
                            // Ajustar color de texto según el fondo
                            const bgColor = course.color.replace('#', '');
                            const r = parseInt(bgColor.substr(0, 2), 16);
                            const g = parseInt(bgColor.substr(2, 2), 16);
                            const b = parseInt(bgColor.substr(4, 2), 16);
                            const brightness = (r * 299 + g * 587 + b * 114) / 1000;
                            courseItem.style.color = brightness > 128 ? 'black' : 'white';
                            
                            cell.appendChild(courseItem);
                        }
                    }
                });
            });
        }
        
        // Añadir un nuevo curso
        function addCourse() {
            const courseName = document.getElementById('courseName').value.trim();
            if (!courseName) {
                alert('Por favor, ingrese un nombre para el curso.');
                return;
            }
            
            // Obtener días seleccionados
            const selectedDays = [];
            daysOfWeek.forEach(day => {
                if (document.getElementById(`day${day}`).checked) {
                    selectedDays.push(day);
                }
            });
            
            if (selectedDays.length === 0) {
                alert('Por favor, seleccione al menos un día de la semana.');
                return;
            }
            
            // Obtener horas
            const startTime = parseInt(document.getElementById('startTime').value);
            const endTime = parseInt(document.getElementById('endTime').value);
            
            if (isNaN(startTime) || isNaN(endTime)) {
                alert('Por favor, seleccione horas de inicio y fin válidas.');
                return;
            }
            
            if (startTime >= endTime) {
                alert('La hora de inicio debe ser anterior a la hora de fin.');
                return;
            }
            
            // Obtener color
            const color = document.getElementById('courseColor').value;
            
            // Crear objeto curso
            const course = {
                name: courseName,
                days: selectedDays,
                startTime: startTime,
                endTime: endTime,
                color: color
            };
            
            // Añadir a la lista de cursos
            courses.push(course);
            
            // Renderizar tabla actualizada
            renderCourses();
            
            // Limpiar formulario
            document.getElementById('courseName').value = '';
            daysOfWeek.forEach(day => {
                document.getElementById(`day${day}`).checked = false;
            });
            document.getElementById('startTime').selectedIndex = 0;
            document.getElementById('endTime').selectedIndex = 0;
        }
        
        // Exportar horario como imagen
        function exportAsImage() {
            const scheduleTable = document.getElementById('scheduleTable');
            
            html2canvas(scheduleTable).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = imgData;
                link.download = 'horario.png';
                link.click();
            });
        }
        
        // Exportar horario como PDF
        function exportAsPdf() {
            const scheduleTable = document.getElementById('scheduleTable');
            const { jsPDF } = window.jspdf;
            
            html2canvas(scheduleTable).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('l', 'mm', 'a4'); // Landscape orientation
                const imgProps = pdf.getImageProperties(imgData);
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save('horario.pdf');
            });
        }
        
        // Crear nuevo horario
        function createNewSchedule() {
            if (courses.length > 0) {
                if (confirm('¿Está seguro de que desea crear un nuevo horario? Se perderán todos los cursos actuales.')) {
                    courses = [];
                    renderCourses();
                }
            } else {
                courses = [];
                renderCourses();
            }
        }
        
        // Manejar menú desplegable
        function toggleDropdown() {
            document.querySelector('.dropdown').classList.toggle('active');
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Generar tabla de horarios
            generateTimeTable();
            
            // Botón para añadir curso
            document.getElementById('addCourseBtn').addEventListener('click', addCourse);
            
            // Botón para crear nuevo horario
            document.getElementById('newScheduleBtn').addEventListener('click', createNewSchedule);
            
            // Cerrar el menú desplegable cuando se hace clic fuera de él
            document.addEventListener('click', function(e) {
                const dropdown = document.querySelector('.dropdown');
                const saveAsBtn = document.getElementById('saveAsBtn');
                
                if (!dropdown.contains(e.target) && e.target !== saveAsBtn) {
                    dropdown.classList.remove('active');
                }
            });
        });
    </script>
            <ul class="menu-description">
                <li>Crear horarios</li>
                <li>Asignar hora y dia del horario</li>
                <li>Asignar nombre de curso</li>
            </ul>
                </div>
            </div>
            </div>
            </div>
                    <!-- Gestionar Usuarios -->
                    <div class="menu-item" data-permiso="gestionar">
                        <div class="menu-header">
                            Gestionar Usuarios
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
    <div class="container">
        <header>
            <h1>Gestión de Usuarios</h1>
        </header>
        <main>
            <section class="user-list-section">
                <h2>Lista de Usuarios</h2>
                <div id="usuariosLista">
                    <!-- Aquí se mostrarán los usuarios -->

                <div id="checkbox.id"> </div>
                </div>
            </section>
        </main>
    </div>
                            <ul class="menu-description">
                                <li>Ver todos los usuarios</li>
                                <li>Modificar datos de usuarios</li>
                                <li>Activar o desactivar usuarios</li>
                                <li>Cambiar roles</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Visualizar Horarios -->
                    <div class="menu-item" data-permiso="visualizarHorarios">
                        <div class="menu-header">
                            Visualizar Horarios
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <ul class="menu-description">
                                        <header>
        <h1>Visualización de Horarios</h1>
    </header>
    <div class="main-container">
        <div class="toolbar">
            <div class="btn-group">
                <button class="btn btn-primary" onclick="window.location.href='generador-horarios.html'">
                    <i>➕</i> Crear nuevo horario
                </button>
                <button class="btn btn-outline">
                    <i>📄</i> Importar
                </button>
                <button class="btn btn-outline">
                    <i>📤</i> Exportar
                </button>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar horarios...">
                <select>
                    <option value="">Todos los días</option>
                    <option value="L">Lunes</option>
                    <option value="K">Martes</option>
                    <option value="M">Miércoles</option>
                    <option value="J">Jueves</option>
                    <option value="V">Viernes</option>
                    <option value="S">Sábado</option>
                    <option value="D">Domingo</option>
                </select>
                <button class="btn btn-primary">Buscar</button>
            </div>
        </div>
        
        <div class="schedules-container" id="schedulesContainer">
            <!-- Las tarjetas de horarios se generarán dinámicamente con JavaScript -->
        </div>
        
        <div class="pagination">
            <button>«</button>
            <button class="active">1</button>
            <button>2</button>
            <button>3</button>
            <button>»</button>
        </div>
    </div>
        <script>
        // Datos de ejemplo para los horarios
        const horarios = [
            {
                id: 1,
                nombre: "Matemáticas Avanzadas",
                dias: ["L", "M", "V"],
                horaInicio: "08:00",
                horaFin: "10:00",
                color: "#4CAF50",
                fechaCreacion: "2025-05-10"
            },
            {
                id: 2,
                nombre: "Física Cuántica",
                dias: ["K", "J"],
                horaInicio: "10:00",
                horaFin: "12:00",
                color: "#2196F3",
                fechaCreacion: "2025-05-12"
            },
            {
                id: 3,
                nombre: "Literatura Española",
                dias: ["L", "M", "V"],
                horaInicio: "14:00",
                horaFin: "16:00",
                color: "#FF9800",
                fechaCreacion: "2025-04-28"
            },
            {
                id: 4,
                nombre: "Programación Web",
                dias: ["K", "J", "S"],
                horaInicio: "16:00",
                horaFin: "18:00",
                color: "#9C27B0",
                fechaCreacion: "2025-05-05"
            },
            {
                id: 5,
                nombre: "Inglés Avanzado",
                dias: ["L", "M", "V"],
                horaInicio: "12:00",
                horaFin: "13:00",
                color: "#F44336",
                fechaCreacion: "2025-05-14"
            },
            {
                id: 6,
                nombre: "Historia del Arte",
                dias: ["M", "J"],
                horaInicio: "09:00",
                horaFin: "11:00",
                color: "#009688",
                fechaCreacion: "2025-05-10"
            }
        ];

        const diasCompletos = {
            "L": "Lunes",
            "K": "Martes",
            "M": "Miércoles",
            "J": "Jueves",
            "V": "Viernes",
            "S": "Sábado",
            "D": "Domingo"
        };

        // Función para crear tarjetas de horarios
        function renderizarHorarios(horarios) {
            const contenedor = document.getElementById('schedulesContainer');
            
            if (horarios.length === 0) {
                contenedor.innerHTML = `
                    <div class="empty-state">
                        <i>📅</i>
                        <h2>No hay horarios disponibles</h2>
                        <p>Crea un nuevo horario o importa uno existente.</p>
                        <button class="btn btn-primary" onclick="window.location.href='generador-horarios.html'">
                            <i>➕</i> Crear nuevo horario
                        </button>
                    </div>
                `;
                return;
            }
            
            contenedor.innerHTML = '';
            
            horarios.forEach(horario => {
                const card = document.createElement('div');
                card.className = 'schedule-card';
                
                // Crear indicadores de días
                let dayIndicators = '';
                ['L', 'K', 'M', 'J', 'V', 'S', 'D'].forEach(dia => {
                    const isActive = horario.dias.includes(dia);
                    dayIndicators += `<div class="day ${isActive ? 'active' : 'inactive'}">${dia}</div>`;
                });
                
                // Construir la estructura de la tarjeta
                card.innerHTML = `
                    <div class="schedule-header" style="background-color: ${horario.color}">
                        <h3 class="schedule-title">${horario.nombre}</h3>
                        <div class="schedule-meta">
                            <span>${horario.horaInicio} - ${horario.horaFin}</span>
                        </div>
                        <div class="schedule-options dropdown">
                            <span>⋮</span>
                            <div class="dropdown-content">
                                <a href="#" onclick="editarHorario(${horario.id})">Editar</a>
                                <a href="#" onclick="duplicarHorario(${horario.id})">Duplicar</a>
                                <a href="#" onclick="eliminarHorario(${horario.id})">Eliminar</a>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-body">
                        <div class="day-indicator">
                            ${dayIndicators}
                        </div>
                        <p class="time-info">
                            <strong>Horario:</strong> ${horario.horaInicio} - ${horario.horaFin}
                        </p>
                        <p class="time-info">
                            <strong>Días:</strong> ${horario.dias.map(d => diasCompletos[d]).join(', ')}
                        </p>
                    </div>
                    <div class="schedule-footer">
                        <span>Creado: ${formatearFecha(horario.fechaCreacion)}</span>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-edit" onclick="editarHorario(${horario.id})">Editar</button>
                            <button class="btn btn-sm btn-delete" onclick="eliminarHorario(${horario.id})">Eliminar</button>
                        </div>
                    </div>
                `;
                
                contenedor.appendChild(card);
            });
        }

        // Función para formatear fechas
        function formatearFecha(fechaStr) {
            const fecha = new Date(fechaStr);
            return fecha.toLocaleDateString('es-ES', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Funciones para manejar acciones de horarios
        function editarHorario(id) {
            alert(`Editando horario con ID: ${id}`);
            // Aquí redirigirías al generador de horarios con el ID del horario a editar
            // window.location.href = `generador-horarios.html?id=${id}`;
        }

        function duplicarHorario(id) {
            alert(`Duplicando horario con ID: ${id}`);
            // Implementar lógica para duplicar horario
        }

        function eliminarHorario(id) {
            if (confirm(`¿Estás seguro de que deseas eliminar el horario con ID: ${id}?`)) {
                // Implementar lógica para eliminar horario
                alert(`Horario con ID: ${id} eliminado`);
                // Actualizar la vista
                renderizarHorarios(horarios.filter(h => h.id !== id));
            }
        }

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', () => {
            renderizarHorarios(horarios);
        });
    </script>
                                <li>Ver horarios de todos los grupos</li>
                                <li>Consultar disponibilidad</li>
                                <li>Exportar horarios</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Horario Aprendiz -->
                    <div class="menu-item" data-permiso="horarioAprendiz">
                        <div class="menu-header">
                            Horario Aprendiz
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <ul class="menu-description">
                                <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .header h1 {
            color: #3B3F8C;
            font-weight: 600;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .user-name {
            font-weight: 500;
            color: #3B3F8C;
        }
        
        .project-title {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .project-title h2 {
            display: inline-block;
            font-size: 32px;
            font-weight: 700;
            margin: 0;
            color: #666;
        }
        
        .project-title span {
            background-color: #40BFB4;
            color: white;
            padding: 5px 25px;
            margin-left: 15px;
            position: relative;
            font-weight: 600;
            clip-path: polygon(0 0, 85% 0, 100% 50%, 85% 100%, 0 100%, 15% 50%);
        }
        
        .project-title span::after {
            content: '';
            position: absolute;
            right: -20px;
            top: 0;
            height: 100%;
            width: 20px;
            background: repeating-linear-gradient(
                45deg,
                #9c27b0,
                #9c27b0 5px,
                transparent 5px,
                transparent 10px
            );
        }
        
        .project-description {
            max-width: 800px;
            margin: 0 auto 30px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        .schedule-grid {
            display: grid;
            grid-template-columns: 200px repeat(4, 1fr);
            gap: 2px;
            margin-bottom: 30px;
        }
        
        .activity-header {
            background-color: #FF7043;
            color: white;
            padding: 15px;
            font-weight: 600;
            text-align: center;
            position: relative;
            clip-path: polygon(0 0, 85% 0, 100% 50%, 85% 100%, 0 100%);
        }
        
        .activity-header::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 15px;
            background: repeating-linear-gradient(
                45deg,
                #FF9800,
                #FF9800 3px,
                transparent 3px,
                transparent 6px
            );
        }
        
        .week-header {
            padding: 10px;
            font-weight: 600;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            color: white;
            clip-path: polygon(0 0, 85% 0, 100% 50%, 85% 100%, 0 100%, 15% 50%);
        }
        
        .week-header::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 15px;
            background: repeating-linear-gradient(
                45deg,
                rgba(255,255,255,0.3),
                rgba(255,255,255,0.3) 3px,
                transparent 3px,
                transparent 6px
            );
        }
        
        .week-header .week-number {
            font-size: 18px;
        }
        
        .week-header .date-range {
            font-size: 12px;
        }
        
        .week-1 {
            background-color: #E91E63;
        }
        
        .week-2 {
            background-color: #8BC34A;
        }
        
        .week-3 {
            background-color: #FF5722;
        }
        
        .week-4 {
            background-color: #009688;
        }
        
        .activity-item {
            background-color: #FF7043;
            color: white;
            padding: 10px;
            margin-bottom: 2px;
            font-size: 14px;
            position: relative;
            clip-path: polygon(0 0, 85% 0, 100% 50%, 85% 100%, 0 100%);
        }
        
        .activity-item::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 15px;
            background: repeating-linear-gradient(
                45deg,
                #FF9800,
                #FF9800 3px,
                transparent 3px,
                transparent 6px
            );
        }
        
        .schedule-cell {
            background-color: white;
            border: 1px solid #eee;
            padding: 10px;
            min-height: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .schedule-cell:hover {
            background-color: #f9f9f9;
        }
        
        .schedule-cell.has-class {
            position: relative;
        }
        
        .class-indicator {
            height: 3px;
            margin-bottom: 5px;
            width: 100%;
        }
        
        .class-indicator.ficha {
            background-color: #E91E63;
        }
        
        .class-indicator.english {
            background-color: #2196F3;
        }
        
        .class-indicator.complementaria {
            background-color: #FFD166;
        }
        
        .class-title {
            font-weight: 500;
            font-size: 12px;
            margin-bottom: 3px;
        }
        
        .class-time {
            font-size: 11px;
            color: #666;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .month-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background-color: white;
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .month-control button {
            background: none;
            border: none;
            cursor: pointer;
            color: #3B3F8C;
            font-size: 18px;
        }
        
        .current-month {
            font-weight: 500;
            font-size: 16px;
            color: #3B3F8C;
        }
        
        .filter-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .filter-btn {
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .filter-btn.active {
            background-color: #3B3F8C;
            color: white;
            border-color: #3B3F8C;
        }
        
        .event-details {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
        }
        
        .event-details h3 {
            color: #3B3F8C;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .event-details .detail-row {
            display: flex;
            margin-bottom: 10px;
        }
        
        .event-details .detail-label {
            width: 120px;
            font-weight: 500;
            color: #666;
        }
        
        .event-details .detail-value {
            flex: 1;
            color: #333;
        }
        
        .event-details .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #666;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 999;
        }
        
        .color-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .color-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }
        
        @media (max-width: 768px) {
            .schedule-grid {
                grid-template-columns: 150px repeat(4, 1fr);
                font-size: 12px;
            }
            
            .activity-item, .activity-header, .week-header {
                padding: 8px 5px;
                font-size: 12px;
            }
            
            .week-header .week-number {
                font-size: 14px;
            }
            
            .week-header .date-range {
                font-size: 10px;
            }
            
            .class-title {
                font-size: 10px;
            }
            
            .class-time {
                font-size: 9px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Chronogest</h1>
            <div class="user-info">
               
                <span class="user-name">Camilo Cuellar</span>
            </div>
        </div>
        
        <div class="project-title">
            <h2>HORARIO</h2>
            <span>APRENDIZ</span>
        </div>
        
        <div class="project-description">
            Visualización del horario semanal del aprendiz con todas las clases programadas para el mes en curso. Cada actividad está organizada por semana y tipo de formación.
        </div>
        
        <div class="controls">
            <div class="month-control">
                <button id="prevMonth">&#9664;</button>
                <span class="current-month" id="currentMonth">Mayo 2025</span>
                <button id="nextMonth">&#9654;</button>
            </div>
        </div>
        
        <div class="filter-options">
            <button class="filter-btn active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="ficha">Ficha Técnica</button>
            <button class="filter-btn" data-filter="english">English</button>
            <button class="filter-btn" data-filter="complementaria">Complementaria</button>
        </div>
        
        <div class="schedule-grid" id="scheduleGrid">
            <!-- Encabezado de actividades -->
            <div class="activity-header">ACTIVIDAD</div>
            
            <!-- Encabezados de semanas -->
            <div class="week-header week-1">
                <div class="week-number">SEMANA 1</div>
                <div class="date-range">MAYO 1-7</div>
            </div>
            <div class="week-header week-2">
                <div class="week-number">SEMANA 2</div>
                <div class="date-range">MAYO 8-14</div>
            </div>
            <div class="week-header week-3">
                <div class="week-number">SEMANA 3</div>
                <div class="date-range">MAYO 15-21</div>
            </div>
            <div class="week-header week-4">
                <div class="week-number">SEMANA 4</div>
                <div class="date-range">MAYO 22-30</div>
            </div>
            
            <!-- El resto del contenido se generará dinámicamente con JavaScript -->
        </div>
        
        <div class="color-dots">
            <div class="color-dot" style="background-color: #E91E63;"></div>
            <div class="color-dot" style="background-color: #2196F3;"></div>
            <div class="color-dot" style="background-color: #FFD166;"></div>
            <div class="color-dot" style="background-color: #8BC34A;"></div>
            <div class="color-dot" style="background-color: #009688;"></div>
            <div class="color-dot" style="background-color: #9C27B0;"></div>
        </div>
    </div>
    
    <div class="overlay" id="overlay"></div>
    <div class="event-details" id="eventDetails">
        <button class="close-btn" id="closeEventDetails">&times;</button>
        <h3 id="eventTitle">Nombre de la Clase</h3>
        <div class="detail-row">
            <div class="detail-label">Instructor:</div>
            <div class="detail-value" id="eventInstructor">Nombre del Instructor</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">Horario:</div>
            <div class="detail-value" id="eventTime">7:00 AM - 9:00 AM</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">Lugar:</div>
            <div class="detail-value" id="eventLocation">Aula 305</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">Tipo:</div>
            <div class="detail-value" id="eventType">Ficha Técnica</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">Descripción:</div>
            <div class="detail-value" id="eventDescription">Descripción detallada de la clase y los temas a tratar.</div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configuración inicial
            const scheduleGrid = document.getElementById('scheduleGrid');
            const currentMonthElement = document.getElementById('currentMonth');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const overlay = document.getElementById('overlay');
            const eventDetails = document.getElementById('eventDetails');
            const closeEventDetailsBtn = document.getElementById('closeEventDetails');
            
            // Lista de actividades
            const activities = [
                "Desarrollo de Software",
                "English",
                "Bases de Datos",
                "Ética Profesional",
                "Desarrollo Web",
                "Proyecto Formativo",
                "Emprendimiento"
            ];
            
            // Datos de horario (simulados)
            const scheduleData = [
                {
                    id: 1,
                    activity: "Desarrollo de Software",
                    title: "POO y Patrones de Diseño",
                    instructor: "Juan Pérez",
                    week: 1,
                    time: "7:00 - 9:00",
                    location: "Aula 305",
                    type: "ficha",
                    description: "Clase de programación orientada a objetos con enfoque en patrones de diseño y arquitectura de software."
                },
                {
                    id: 2,
                    activity: "English",
                    title: "English Level 2",
                    instructor: "María Johnson",
                    week: 1,
                    time: "10:00 - 12:00",
                    location: "Language Lab",
                    type: "english",
                    description: "English conversation practice focusing on business and technical vocabulary."
                },
                {
                    id: 3,
                    activity: "Bases de Datos",
                    title: "Diseño y Normalización",
                    instructor: "Carlos Ramírez",
                    week: 2,
                    time: "7:00 - 10:00",
                    location: "Sala de Cómputo 2",
                    type: "ficha",
                    description: "Diseño y normalización de bases de datos relacionales. Implementación con MySQL."
                },
                {
                    id: 4,
                    activity: "Ética Profesional",
                    title: "Casos de Estudio",
                    instructor: "Laura Gómez",
                    week: 3,
                    time: "14:00 - 16:00",
                    location: "Auditorio Principal",
                    type: "complementaria",
                    description: "Análisis de casos de estudio sobre ética en el entorno laboral y responsabilidad profesional."
                },
                {
                    id: 5,
                    activity: "Desarrollo Web",
                    title: "Frontend Avanzado",
                    instructor: "Andrés Torres",
                    week: 2,
                    time: "7:00 - 11:00",
                    location: "Aula 402",
                    type: "ficha",
                    description: "Creación de aplicaciones web con HTML5, CSS3 y JavaScript. Frameworks modernos y responsive design."
                },
                {
                    id: 6,
                    activity: "English",
                    title: "Technical Workshop",
                    instructor: "María Johnson",
                    week: 4,
                    time: "10:00 - 12:00",
                    location: "Language Lab",
                    type: "english",
                    description: "Technical English workshop focused on IT terminology and documentation."
                },
                {
                    id: 7,
                    activity: "Proyecto Formativo",
                    title: "Revisión de Avances",
                    instructor: "Roberto Sánchez",
                    week: 3,
                    time: "8:00 - 12:00",
                    location: "Sala de Proyectos",
                    type: "ficha",
                    description: "Sesión de trabajo guiada para el desarrollo del proyecto de grado. Revisión de avances y feedback."
                },
                {
                    id: 8,
                    activity: "Emprendimiento",
                    title: "Plan de Negocios",
                    instructor: "Diana Martínez",
                    week: 4,
                    time: "13:00 - 15:00",
                    location: "Sala de Innovación",
                    type: "complementaria",
                    description: "Desarrollo del modelo de negocio y estrategias de mercado para proyectos de emprendimiento."
                }
            ];
            
            // Variables para el manejo de fechas
            let currentDate = new Date();
            let currentMonth = currentDate.getMonth();
            let currentYear = currentDate.getFullYear();
            
            // Inicializar la vista
            updateMonthDisplay();
            generateScheduleGrid();
            renderSchedule('all');
            
            // Event Listeners
            prevMonthBtn.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                updateMonthDisplay();
                updateWeekHeaders();
            });
            
            nextMonthBtn.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                updateMonthDisplay();
                updateWeekHeaders();
            });
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    renderSchedule(this.dataset.filter);
                });
            });
            
            closeEventDetailsBtn.addEventListener('click', closeEventDetails);
            overlay.addEventListener('click', closeEventDetails);
            
            // Funciones
            function updateMonthDisplay() {
                const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                currentMonthElement.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            }
            
            function updateWeekHeaders() {
                // Obtener primer día del mes
                const firstDay = new Date(currentYear, currentMonth, 1);
                const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                
                // Actualizar encabezados de semanas con rangos de fechas adecuados
                const weekHeaders = document.querySelectorAll('.week-header');
                
                for (let i = 0; i < weekHeaders.length; i++) {
                    const weekStart = i * 7 + 1;
                    let weekEnd = weekStart + 6;
                    
                    // Ajustar fin de mes
                    const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
                    if (weekEnd > lastDayOfMonth) weekEnd = lastDayOfMonth;
                    
                    const dateRange = document.querySelector(`.week-${i+1} .date-range`);
                    dateRange.textContent = `${monthNames[currentMonth].toUpperCase()} ${weekStart}-${weekEnd}`;
                }
            }
            
            function generateScheduleGrid() {
                // Agregar filas de actividades y celdas
                activities.forEach(activity => {
                    // Fila de actividad
                    const activityRow = document.createElement('div');
                    activityRow.className = 'activity-item';
                    activityRow.textContent = activity;
                    scheduleGrid.appendChild(activityRow);
                    
                    // Celdas para cada semana
                    for (let week = 1; week <= 4; week++) {
                        const cell = document.createElement('div');
                        cell.className = 'schedule-cell';
                        cell.dataset.activity = activity;
                        cell.dataset.week = week;
                        scheduleGrid.appendChild(cell);
                    }
                });
            }
            
            function renderSchedule(filter) {
                // Limpiar contenido de celdas
                document.querySelectorAll('.schedule-cell').forEach(cell => {
                    cell.innerHTML = '';
                    cell.classList.remove('has-class');
                });
                
                // Filtrar los eventos según el tipo seleccionado
                const filteredEvents = filter === 'all' ? 
                    scheduleData : 
                    scheduleData.filter(event => event.type === filter);
                
                // Renderizar cada evento en la celda correspondiente
                filteredEvents.forEach(event => {
                    const cell = document.querySelector(`.schedule-cell[data-activity="${event.activity}"][data-week="${event.week}"]`);
                    
                    if (cell) {
                        cell.classList.add('has-class');
                        
                        // Crear indicador de clase
                        const indicator = document.createElement('div');
                        indicator.className = `class-indicator ${event.type}`;
                        
                        // Título de la clase
                        const title = document.createElement('div');
                        title.className = 'class-title';
                        title.textContent = event.title;
                        
                        // Horario
                        const time = document.createElement('div');
                        time.className = 'class-time';
                        time.textContent = event.time;
                        
                        // Agregar elementos a la celda
                        cell.appendChild(indicator);
                        cell.appendChild(title);
                        cell.appendChild(time);
                        
                        // Añadir listener para mostrar detalles
                        cell.addEventListener('click', function() {
                            showEventDetails(event);
                        });
                    }
                });
            }
            
            function showEventDetails(event) {
                document.getElementById('eventTitle').textContent = event.title;
                document.getElementById('eventInstructor').textContent = event.instructor;
                document.getElementById('eventTime').textContent = event.time;
                document.getElementById('eventLocation').textContent = event.location;
                document.getElementById('eventType').textContent = getTypeLabel(event.type);
                document.getElementById('eventDescription').textContent = event.description;
                
                overlay.style.display = 'block';
                eventDetails.style.display = 'block';
            }
            
            function closeEventDetails() {
                overlay.style.display = 'none';
                eventDetails.style.display = 'none';
            }
            
            function getTypeLabel(type) {
                switch(type) {
                    case 'ficha': return 'Ficha Técnica';
                    case 'english': return 'English';
                    case 'complementaria': return 'Formación Complementaria';
                    default: return type;
                }
            }
        });
    </script>

                                <li>Ver tu horario personal</li>
                                <li>Recibir notificaciones de cambios</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Horario Instructor -->
                    <div class="menu-item" data-permiso="horarioInstructor">
                        <div class="menu-header">
                            Horario Instructor
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <ul class="menu-description">
    <header>
        <h1>Gestion de Horarios - Instructor</h1>
    </header>

    <div class="container">
        <div class="horarios">
            <h2>Horarios Asignados</h2>
            <table id="tabla-horarios">
                <!-- Aquí se llenarán los horarios con JS -->
            </table>
        </div>

        <div class="solicitar-cambio">
            <h2>Solicitar Cambio de Horario</h2>
            <form id="form-cambio">
                <label for="hora">Hora Actual:</label>
                <input type="text" id="hora" disabled><br>
                <label for="hora-nueva">Nueva Hora:</label>
                <input type="text" id="hora-nueva"><br>
                <label for="motivo">Motivo del Cambio:</label>
                <textarea id="motivo"></textarea><br>
                <button type="submit">Solicitar Cambio</button>
            </form>
        </div>

        <!-- Respuesta del Administrador -->
        <div class="respuesta-admin" id="respuesta-admin">
            <h2>Respuesta del Administrador</h2>
            <p id="respuesta"></p>
        </div>

        <!-- Solicitudes Pendientes para el Administrador -->
        <div class="solicitudes-admin" id="solicitudes-admin">
            <h2>Solicitudes Pendientes</h2>
            <ul id="lista-solicitudes">
                <!-- Las solicitudes se mostrarán aquí solo si el rol es Administrador -->
            </ul>
        </div>
    </div>

                                <li>Ver tus clases asignadas</li>
                                <li>Consultar tu agenda semanal</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Revisar Solicitudes -->
                    <div class="menu-item" data-permiso="revisarSolicitudes">
                        <div class="menu-header">
                            Revisar Solicitudes
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <ul class="menu-description">
                                    <main>
        <div class="page-title">
            <h1>Revisar Solicitudes</h1>
            <button class="btn btn-primary" id="exportBtn">
                <i class="fas fa-download"></i> Exportar
            </button>
        </div>

        <!-- Filtros y búsqueda -->
        <div class="filter-section">
            <div class="filter-container">
                <div class="filter-group">
                    <span class="filter-label">Estado:</span>
                    <select class="filter-select" id="statusFilter">
                        <option value="todos">Todos</option>
                        <option value="pendiente" selected>Pendientes</option>
                        <option value="aprobado">Aprobados</option>
                        <option value="rechazado">Rechazados</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Tipo:</span>
                    <select class="filter-select" id="typeFilter">
                        <option value="todos">Todos</option>
                        <option value="vacaciones">Vacaciones</option>
                        <option value="permiso">Permisos</option>
                        <option value="enfermedad">Enfermedad</option>
                        <option value="otros">Otros</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Departamento:</span>
                    <select class="filter-select" id="deptFilter">
                        <option value="todos">Todos</option>
                        <option value="rrhh">RRHH</option>
                        <option value="it">IT</option>
                        <option value="ventas">Ventas</option>
                        <option value="marketing">Marketing</option>
                        <option value="finanzas">Finanzas</option>
                    </select>
                </div>
                <div class="search-group">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="searchInput" placeholder="Buscar por nombre o ID...">
                </div>
            </div>
        </div>

        <!-- Grid de solicitudes -->
        <div class="solicitudes-grid" id="solicitudesGrid">
            <!-- Tarjeta de solicitud 1 -->
            <div class="solicitud-card" data-id="SOL-001">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Actividad Ludica</div>
                    <div class="solicitud-estado estado-pendiente">Pendiente</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">Ins.Norma Perez</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Ambiente:</div>
                            <div class="info-value">y13</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">10/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Periodo:</div>
                            <div class="info-value">20/05/2025 - 27/05/2025</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-001">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-001">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-001">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de solicitud 2 -->
            <div class="solicitud-card" data-id="SOL-002">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Cambio de Hora</div>
                    <div class="solicitud-estado estado-pendiente">Aprobado</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">Ins.Wilson</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Ambiente:</div>
                            <div class="info-value">Y11</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">11/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha permiso:</div>
                            <div class="info-value">18/05/2025</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-002">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-002">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-002">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de solicitud 3 -->
            <div class="solicitud-card" data-id="SOL-003">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Agregar Formacion</div>
                    <div class="solicitud-estado estado-pendiente">Pendiente</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">ins.Diego</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Ambiente:</div>
                            <div class="info-value">Y12</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">12/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Periodo:</div>
                            <div class="info-value">12/05/2025 - 15/05/2025</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-003">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-003">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-003">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de solicitud 4 -->
            <div class="solicitud-card" data-id="SOL-004">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Asistencia</div>
                    <div class="solicitud-estado estado-pendiente">Pendiente</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">Camilo Cuellar</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Razon:</div>
                            <div class="info-value">Numero de Valentina Multimedia</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">13/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha permiso:</div>
                            <div class="info-value">20/05/2025</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-004">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-004">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-004">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de solicitud 5 -->
            <div class="solicitud-card" data-id="SOL-005">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Modificar Horario</div>
                    <div class="solicitud-estado estado-pendiente">Pendiente</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">Ins.Edwar</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Ambiente:</div>
                            <div class="info-value">Y5</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">14/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Periodo:</div>
                            <div class="info-value">01/06/2025 - 15/06/2025</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-005">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-005">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-005">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de solicitud 6 -->
            <div class="solicitud-card" data-id="SOL-006">
                <div class="solicitud-header">
                    <div class="solicitud-tipo">Otros</div>
                    <div class="solicitud-estado estado-pendiente">Pendiente</div>
                </div>
                <div class="solicitud-content">
                    <div class="solicitud-info">
                        <div class="info-row">
                            <div class="info-label">Solicitante:</div>
                            <div class="info-value">Instructor Diego:</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Jornada:</div>
                            <div class="info-value">Diurna</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fecha solicitud:</div>
                            <div class="info-value">14/05/2025</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Motivo:</div>
                            <div class="info-value">Formación profesional</div>
                        </div>
                    </div>
                    <div class="solicitud-actions">
                        <button class="btn btn-neutral ver-detalles" data-id="SOL-006">
                            <i class="fas fa-eye"></i> Ver detalles
                        </button>
                        <button class="btn btn-success aprobar-solicitud" data-id="SOL-006">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="SOL-006">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Paginación -->
        <div class="pagination" id="pagination">
            <div class="page-item disabled">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="page-item active">1</div>
            <div class="page-item">2</div>
            <div class="page-item">3</div>
            <div class="page-item">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
    </main>

    <!-- Modal de detalles -->
    <div class="modal-backdrop" id="detallesModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Solicitud de Vacaciones - SOL-001</div>
                <button class="modal-close" id="closeModal">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h3 class="modal-section-title">Información de la Solicitud</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ID Solicitud</div>
                            <div class="detail-value">SOL-001</div>
                        </div>
                        <div class="detail-item">
                        
                            <script >const solicitudesData = [
    {
        id: "SOL-001",
        tipo: "Vacaciones",
        estado: "pendiente",
        solicitante: "Ana García",
        departamento: "RRHH",
        fechaSolicitud: "10/05/2025",
        periodo: "20/05/2025 - 27/05/2025",
        detalles: "Vacaciones anuales programadas"
    },
    {
        id: "SOL-002",
        tipo: "Permiso",
        estado: "pendiente",
        solicitante: "Carlos Martínez",
        departamento: "IT",
        fechaSolicitud: "11/05/2025",
        fechaPermiso: "18/05/2025",
        detalles: "Asuntos personales"
    },
    {
        id: "SOL-003",
        tipo: "Enfermedad",
        estado: "pendiente",
        solicitante: "Elena Sánchez",
        departamento: "Ventas",
        fechaSolicitud: "12/05/2025",
        periodo: "12/05/2025 - 15/05/2025",
        detalles: "Reposo por gripe"
    },
    {
        id: "SOL-004",
        tipo: "Permiso",
        estado: "pendiente",
        solicitante: "Miguel Torres",
        departamento: "Marketing",
        fechaSolicitud: "13/05/2025",
        fechaPermiso: "20/05/2025",
        detalles: "Cita médica"
    },
    {
        id: "SOL-005",
        tipo: "Vacaciones",
        estado: "pendiente",
        solicitante: "Laura Pérez",
        departamento: "Finanzas",
        fechaSolicitud: "14/05/2025",
        periodo: "01/06/2025 - 15/06/2025",
        detalles: "Vacaciones de verano"
    },
    {
        id: "SOL-006",
        tipo: "Otros",
        estado: "pendiente",
        solicitante: "Roberto Díaz",
        departamento: "RRHH",
        fechaSolicitud: "14/05/2025",
        motivo: "Formación profesional",
        detalles: "Curso de actualización en gestión de personal"
    },
    {
        id: "SOL-007",
        tipo: "Vacaciones",
        estado: "aprobado",
        solicitante: "María López",
        departamento: "IT",
        fechaSolicitud: "05/05/2025",
        periodo: "01/07/2025 - 15/07/2025",
        detalles: "Vacaciones de verano"
    },
    {
        id: "SOL-008",
        tipo: "Permiso",
        estado: "rechazado",
        solicitante: "Pedro Gómez",
        departamento: "Ventas",
        fechaSolicitud: "02/05/2025",
        fechaPermiso: "05/05/2025",
        detalles: "Rechazado por falta de personal ese día"
    }
];

// Variables globales para el manejo de la aplicación
let solicitudesFiltradas = [...solicitudesData];
let paginaActual = 1;
const solicitudesPorPagina = 6;

// Elementos DOM
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar la aplicación
    inicializarApp();
    
    // Configurar event listeners
    configurarEventListeners();
});

function inicializarApp() {
    // Cargar solicitudes iniciales (por defecto filtradas a pendientes)
    filtrarSolicitudes();
    
    // Actualizar paginación
    actualizarPaginacion();
}

function configurarEventListeners() {
    // Filtros
    document.getElementById('statusFilter').addEventListener('change', filtrarSolicitudes);
    document.getElementById('typeFilter').addEventListener('change', filtrarSolicitudes);
    document.getElementById('deptFilter').addEventListener('change', filtrarSolicitudes);
    
    // Búsqueda
    document.getElementById('searchInput').addEventListener('input', filtrarSolicitudes);
    
    // Exportar
    document.getElementById('exportBtn').addEventListener('click', exportarDatos);
    
    // Cerrar modal
    document.getElementById('closeModal').addEventListener('click', cerrarModal);
    
    // Delegación de eventos para botones en las tarjetas (que pueden ser dinámicas)
    document.getElementById('solicitudesGrid').addEventListener('click', function(e) {
        // Ver detalles
        if (e.target.classList.contains('ver-detalles') || 
            (e.target.parentElement && e.target.parentElement.classList.contains('ver-detalles'))) {
            const id = e.target.dataset.id || e.target.parentElement.dataset.id;
            mostrarDetalles(id);
        }
        
        // Aprobar solicitud
        if (e.target.classList.contains('aprobar-solicitud') || 
            (e.target.parentElement && e.target.parentElement.classList.contains('aprobar-solicitud'))) {
            const id = e.target.dataset.id || e.target.parentElement.dataset.id;
            aprobarSolicitud(id);
        }
        
        // Rechazar solicitud
        if (e.target.classList.contains('rechazar-solicitud') || 
            (e.target.parentElement && e.target.parentElement.classList.contains('rechazar-solicitud'))) {
            const id = e.target.dataset.id || e.target.parentElement.dataset.id;
            rechazarSolicitud(id);
        }
    });
    
    // Paginación
    document.getElementById('pagination').addEventListener('click', function(e) {
        if (e.target.classList.contains('page-item') && !e.target.classList.contains('active') && !e.target.classList.contains('disabled')) {
            if (e.target.textContent === '→' || e.target.querySelector('.fa-chevron-right')) {
                cambiarPagina(paginaActual + 1);
            } else if (e.target.textContent === '←' || e.target.querySelector('.fa-chevron-left')) {
                cambiarPagina(paginaActual - 1);
            } else {
                cambiarPagina(parseInt(e.target.textContent));
            }
        }
    });
}

function filtrarSolicitudes() {
    const statusFilter = document.getElementById('statusFilter').value;
    const typeFilter = document.getElementById('typeFilter').value;
    const deptFilter = document.getElementById('deptFilter').value;
    const searchText = document.getElementById('searchInput').value.toLowerCase();
    
    // Filtrar por criterios seleccionados
    solicitudesFiltradas = solicitudesData.filter(solicitud => {
        // Filtro de estado
        if (statusFilter !== 'todos' && solicitud.estado !== statusFilter) {
            return false;
        }
        
        // Filtro de tipo
        if (typeFilter !== 'todos' && solicitud.tipo.toLowerCase() !== typeFilter) {
            return false;
        }
        
        // Filtro de departamento
        if (deptFilter !== 'todos' && solicitud.departamento.toLowerCase() !== deptFilter) {
            return false;
        }
        
        // Filtro de búsqueda por nombre o ID
        if (searchText && 
            !solicitud.id.toLowerCase().includes(searchText) && 
            !solicitud.solicitante.toLowerCase().includes(searchText)) {
            return false;
        }
        
        return true;
    });
    
    // Resetear a la primera página cuando se aplica un filtro
    paginaActual = 1;
    
    // Actualizar la vista
    renderizarSolicitudes();
    actualizarPaginacion();
}

function renderizarSolicitudes() {
    const grid = document.getElementById('solicitudesGrid');
    grid.innerHTML = '';
    
    // Calcular índices para paginación
    const startIndex = (paginaActual - 1) * solicitudesPorPagina;
    const endIndex = startIndex + solicitudesPorPagina;
    const solicitudesPagina = solicitudesFiltradas.slice(startIndex, endIndex);
    
    if (solicitudesPagina.length === 0) {
        grid.innerHTML = '<div class="no-results">No se encontraron solicitudes con los filtros actuales</div>';
        return;
    }
    
    // Crear tarjetas para cada solicitud
    solicitudesPagina.forEach(solicitud => {
        const card = document.createElement('div');
        card.className = 'solicitud-card';
        card.dataset.id = solicitud.id;
        
        let periodoInfo = '';
        if (solicitud.periodo) {
            periodoInfo = `
                <div class="info-row">
                    <div class="info-label">Periodo:</div>
                    <div class="info-value">${solicitud.periodo}</div>
                </div>
            `;
        } else if (solicitud.fechaPermiso) {
            periodoInfo = `
                <div class="info-row">
                    <div class="info-label">Fecha permiso:</div>
                    <div class="info-value">${solicitud.fechaPermiso}</div>
                </div>
            `;
        } else if (solicitud.motivo) {
            periodoInfo = `
                <div class="info-row">
                    <div class="info-label">Motivo:</div>
                    <div class="info-value">${solicitud.motivo}</div>
                </div>
            `;
        }
        
        card.innerHTML = `
            <div class="solicitud-header">
                <div class="solicitud-tipo">${solicitud.tipo}</div>
                <div class="solicitud-estado estado-${solicitud.estado}">${capitalize(solicitud.estado)}</div>
            </div>
            <div class="solicitud-content">
                <div class="solicitud-info">
                    <div class="info-row">
                        <div class="info-label">Solicitante:</div>
                        <div class="info-value">${solicitud.solicitante}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Departamento:</div>
                        <div class="info-value">${solicitud.departamento}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Fecha solicitud:</div>
                        <div class="info-value">${solicitud.fechaSolicitud}</div>
                    </div>
                    ${periodoInfo}
                </div>
                <div class="solicitud-actions">
                    <button class="btn btn-neutral ver-detalles" data-id="${solicitud.id}">
                        <i class="fas fa-eye"></i> Ver detalles
                    </button>
                    ${solicitud.estado === 'pendiente' ? `
                        <button class="btn btn-success aprobar-solicitud" data-id="${solicitud.id}">
                            <i class="fas fa-check"></i> Aprobar
                        </button>
                        <button class="btn btn-danger rechazar-solicitud" data-id="${solicitud.id}">
                            <i class="fas fa-times"></i> Rechazar
                        </button>
                    ` : ''}
                </div>
            </div>
        `;
        
        grid.appendChild(card);
    });
}

function actualizarPaginacion() {
    const totalPaginas = Math.ceil(solicitudesFiltradas.length / solicitudesPorPagina);
    const paginationEl = document.getElementById('pagination');
    paginationEl.innerHTML = '';
    
    // Botón anterior
    const prevBtn = document.createElement('div');
    prevBtn.className = `page-item ${paginaActual === 1 ? 'disabled' : ''}`;
    prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
    paginationEl.appendChild(prevBtn);
    
    // Números de página
    for (let i = 1; i <= totalPaginas; i++) {
        const pageBtn = document.createElement('div');
        pageBtn.className = `page-item ${i === paginaActual ? 'active' : ''}`;
        pageBtn.textContent = i;
        paginationEl.appendChild(pageBtn);
    }
    
    // Botón siguiente
    const nextBtn = document.createElement('div');
    nextBtn.className = `page-item ${paginaActual === totalPaginas ? 'disabled' : ''}`;
    nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
    paginationEl.appendChild(nextBtn);
}

function cambiarPagina(pagina) {
    const totalPaginas = Math.ceil(solicitudesFiltradas.length / solicitudesPorPagina);
    
    if (pagina >= 1 && pagina <= totalPaginas) {
        paginaActual = pagina;
        renderizarSolicitudes();
        actualizarPaginacion();
    }
}

function mostrarDetalles(id) {
    const solicitud = solicitudesData.find(s => s.id === id);
    if (!solicitud) return;
    
    const modal = document.getElementById('detallesModal');
    const modalTitle = modal.querySelector('.modal-title');
    const modalBody = modal.querySelector('.modal-body');
    
    // Actualizar título del modal
    modalTitle.textContent = `Solicitud de ${solicitud.tipo} - ${solicitud.id}`;
    
    // Preparar contenido del cuerpo del modal
    let infoAdicional = '';
    if (solicitud.periodo) {
        infoAdicional = `
            <div class="detail-item">
                <div class="detail-label">Periodo</div>
                <div class="detail-value">${solicitud.periodo}</div>
            </div>
        `;
    } else if (solicitud.fechaPermiso) {
        infoAdicional = `
            <div class="detail-item">
                <div class="detail-label">Fecha de Permiso</div>
                <div class="detail-value">${solicitud.fechaPermiso}</div>
            </div>
        `;
    } else if (solicitud.motivo) {
        infoAdicional = `
            <div class="detail-item">
                <div class="detail-label">Motivo</div>
                <div class="detail-value">${solicitud.motivo}</div>
            </div>
        `;
    }
    
    modalBody.innerHTML = `
        <div class="modal-section">
            <h3 class="modal-section-title">Información de la Solicitud</h3>
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">ID Solicitud</div>
                    <div class="detail-value">${solicitud.id}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Tipo</div>
                    <div class="detail-value">${solicitud.tipo}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Estado</div>
                    <div class="detail-value estado-texto-${solicitud.estado}">${capitalize(solicitud.estado)}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Fecha de Solicitud</div>
                    <div class="detail-value">${solicitud.fechaSolicitud}</div>
                </div>
                ${infoAdicional}
            </div>
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">Información del Solicitante</h3>
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">Nombre</div>
                    <div class="detail-value">${solicitud.solicitante}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Departamento</div>
                    <div class="detail-value">${solicitud.departamento}</div>
                </div>
            </div>
        </div>
        
        <div class="modal-section">
            <h3 class="modal-section-title">Detalles Adicionales</h3>
            <div class="detail-text">
                ${solicitud.detalles || 'No hay detalles adicionales'}
            </div>
        </div>
        
        ${solicitud.estado === 'pendiente' ? `
            <div class="modal-actions">
                <button class="btn btn-success aprobar-solicitud" data-id="${solicitud.id}">
                    <i class="fas fa-check"></i> Aprobar
                </button>
                <button class="btn btn-danger rechazar-solicitud" data-id="${solicitud.id}">
                    <i class="fas fa-times"></i> Rechazar
                </button>
            </div>
        ` : ''}
    `;
    
    // Configurar nuevos botones de acción
    const botonesAccion = modalBody.querySelectorAll('.aprobar-solicitud, .rechazar-solicitud');
    botonesAccion.forEach(btn => {
        const isAprobar = btn.classList.contains('aprobar-solicitud');
        btn.addEventListener('click', () => {
            if (isAprobar) {
                aprobarSolicitud(solicitud.id);
            } else {
                rechazarSolicitud(solicitud.id);
            }
            cerrarModal();
        });
    });
    
    // Mostrar modal
    modal.classList.add('show');
}

function cerrarModal() {
    const modal = document.getElementById('detallesModal');
    modal.classList.remove('show');
}

function aprobarSolicitud(id) {
    // Encontrar la solicitud en los datos
    const solicitud = solicitudesData.find(s => s.id === id);
    if (!solicitud) return;
    
    // Cambiar el estado
    solicitud.estado = 'aprobado';
    
    // Actualizar UI
    filtrarSolicitudes();
    
    // Mostrar notificación
    mostrarNotificacion(`La solicitud ${id} ha sido aprobada con éxito`);
}

function rechazarSolicitud(id) {
    // Encontrar la solicitud en los datos
    const solicitud = solicitudesData.find(s => s.id === id);
    if (!solicitud) return;
    
    // Cambiar el estado
    solicitud.estado = 'rechazado';
    
    // Actualizar UI
    filtrarSolicitudes();
    
    // Mostrar notificación
    mostrarNotificacion(`La solicitud ${id} ha sido rechazada`);
}

function exportarDatos() {
    // En un caso real, aquí generaríamos un Excel o CSV
    // Para este ejemplo, simplemente mostramos una notificación
    mostrarNotificacion('Datos exportados correctamente');
    
    // Crear objeto para simular la descarga
    const dataStr = JSON.stringify(solicitudesFiltradas, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(dataBlob);
    
    // Crear un enlace temporal y hacer clic en él
    const a = document.createElement('a');
    a.href = url;
    a.download = 'solicitudes_exportadas.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

function mostrarNotificacion(mensaje) {
    // Verificar si ya existe una notificación
    let notificacion = document.querySelector('.notificacion');
    
    if (!notificacion) {
        // Crear elemento de notificación
        notificacion = document.createElement('div');
        notificacion.className = 'notificacion';
        document.body.appendChild(notificacion);
    }
    
    // Actualizar mensaje y mostrar
    notificacion.textContent = mensaje;
    notificacion.classList.add('show');
    
    // Ocultar después de 3 segundos
    setTimeout(() => {
        notificacion.classList.remove('show');
    }, 3000);
}

// Función de utilidad para capitalizar texto
function capitalize(text) {
    return text.charAt(0).toUpperCase() + text.slice(1);
}

// Inicializar cuando el DOM esté cargado
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar la aplicación
    inicializarApp();
    
    // Configurar event listeners
    configurarEventListeners();
});</script>

                                <li>Aprobar o rechazar solicitudes</li>
                                <li>Enviar notificaciones</li>
                                <li>Ver historial de cambios</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Editar Horarios -->
                    <div class="menu-item" data-permiso="editarHorarios">
                        <div class="menu-header">
                            Editar Horarios
                            <span class="icon">▼</span>
                        </div>
                        <div class="menu-content">
                            <ul class="menu-description">
                                <li>Modificar horarios existentes</li>
                                <li>Realizar cambios de emergencia</li>
                                <li>Actualizar asignaciones</li>
                            </ul>
                        </div>
                    </div>
                    
                   
        </section>
    </div>
        </div>
    <script src="../js/inicio.js"></script>
    <script src="../js/crearhorarios.js"></script>
    <script src="../js/gestion-usuarios.js"></script>
    <script src="../js/registro.js"></script>
    <script src="../js/instru-horario.js"></script>
</body>
</html>