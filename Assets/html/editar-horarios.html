<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Horarios</title>
    <link rel="stylesheet" href="/Assets/css/editar-horarios.css">
</head>
<body>
     <div class="container">
        <div class="sidebar">
            <h1>TICS</h1>
            <p onclick="filterSchedules('TICS', 1)">Horario 1</p>
            <p onclick="filterSchedules('TICS', 2)">Horario 2</p>
            <p onclick="filterSchedules('TICS', 3)">Horario 3</p>
            
            <h2>Escuela Cafe</h2>
            <p onclick="filterSchedules('Escuela Cafe', 1)">Horario 1</p>
            <p onclick="filterSchedules('Escuela Cafe', 2)">Horario 2</p>
            <p onclick="filterSchedules('Escuela Cafe', 3)">Horario 3</p>
            
            <h2>Agro</h2>
            <p onclick="filterSchedules('Agro', 1)">Horario 1</p>
            <p onclick="filterSchedules('Agro', 2)">Horarios 2</p>
            <p onclick="filterSchedules('Agro', 3)">Horario 3</p>
        </div>
        
        <div class="main-content" id="main-content">
            <!-- TICS-1 Card -->
            <div class="schedule-card" data-section="TICS" data-schedule="1">
                <div class="schedule-header">TICS-1</div>
                <div class="schedule-info">
                    <p>-Horario 1</p>
                    <p>-Ambiente</p>
                    <p>-Y14</p>
                </div>
                <button class="change-btn" onclick="openModal('TICS', 1)">Cambiar</button>
                <div class="data-fields">
                    <div class="data-field">Nombre</div>
                    <div class="data-field">Ambiente</div>
                    <div class="data-field">Hora</div>
                </div>
            </div>
            
            <!-- TICS-2 Card -->
            <div class="schedule-card" data-section="TICS" data-schedule="2">
                <div class="schedule-header">TICS-2</div>
                <div class="schedule-info">
                    <p>-Horario 2</p>
                    <p>-Ambiente</p>
                    <p>-Y12</p>
                </div>
                <button class="change-btn" onclick="openModal('TICS', 2)">Cambiar</button>
                <div class="data-fields">
                    <div class="data-field">Nombre</div>
                    <div class="data-field">Ambiente</div>
                    <div class="data-field">Hora</div>
                </div>
            </div>
            
            <!-- Edit Modal -->
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <h3 id="modalTitle">Editar Horario</h3>
                    <input type="hidden" id="editSection">
                    <input type="hidden" id="editSchedule">
                    
                    <label for="editNombre">Nombre:</label>
                    <input type="text" id="editNombre">
                    
                    <label for="editAmbiente">Ambiente:</label>
                    <input type="text" id="editAmbiente">
                    
                    <label for="editHora">CÃ³digo de Sala:</label>
                    <input type="text" id="editHora">
                    
                    <div class="modal-buttons">
                        <button class="save-btn" onclick="saveChanges()">Guardar</button>
                        <button class="cancel-btn" onclick="closeModal()">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data structure to store schedule information
        const scheduleData = {
            'TICS': {
                1: { nombre: 'TICS-1', ambiente: 'Ambiente', hora: 'Y14' },
                2: { nombre: 'TICS-2', ambiente: 'Ambiente', hora: 'Y12' },
                3: { nombre: 'TICS-3', ambiente: 'Sin asignar', hora: 'Sin asignar' }
            },
            'Escuela Cafe': {
                1: { nombre: 'Cafe-1', ambiente: 'Laboratorio', hora: 'C10' },
                2: { nombre: 'Cafe-2', ambiente: 'Sala principal', hora: 'C12' },
                3: { nombre: 'Cafe-3', ambiente: 'Exterior', hora: 'C15' }
            },
            'Agro': {
                1: { nombre: 'Agro-1', ambiente: 'Campo', hora: 'A01' },
                2: { nombre: 'Agro-2', ambiente: 'Invernadero', hora: 'A02' },
                3: { nombre: 'Agro-3', ambiente: 'Laboratorio', hora: 'A03' }
            }
        };

        // Function to open the edit modal
        function openModal(section, schedule) {
            document.getElementById('editSection').value = section;
            document.getElementById('editSchedule').value = schedule;
            
            const data = scheduleData[section][schedule];
            document.getElementById('modalTitle').innerText = `Editar ${data.nombre}`;
            document.getElementById('editNombre').value = data.nombre;
            document.getElementById('editAmbiente').value = data.ambiente;
            document.getElementById('editHora').value = data.hora;
            
            document.getElementById('editModal').style.display = 'block';
        }

        // Function to close the modal
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Function to save changes
        function saveChanges() {
            const section = document.getElementById('editSection').value;
            const schedule = document.getElementById('editSchedule').value;
            
            // Update data structure
            scheduleData[section][schedule] = {
                nombre: document.getElementById('editNombre').value,
                ambiente: document.getElementById('editAmbiente').value,
                hora: document.getElementById('editHora').value
            };
            
            // Update display
            updateScheduleCards();
            
            // Close modal
            closeModal();
        }

        // Function to update all schedule cards
        function updateScheduleCards() {
            const mainContent = document.getElementById('main-content');
            
            // Clear existing cards except the modal
            const modal = document.getElementById('editModal');
            mainContent.innerHTML = '';
            mainContent.appendChild(modal);
            
            // Create cards for all sections
            for (const section in scheduleData) {
                for (const schedule in scheduleData[section]) {
                    const data = scheduleData[section][schedule];
                    
                    // Create card
                    const card = document.createElement('div');
                    card.className = 'schedule-card';
                    card.dataset.section = section;
                    card.dataset.schedule = schedule;
                    
                    card.innerHTML = `
                        <div class="schedule-header">${data.nombre}</div>
                        <div class="schedule-info">
                            <p>-Horario ${schedule}</p>
                            <p>-${data.ambiente}</p>
                            <p>-${data.hora}</p>
                        </div>
                        <button class="change-btn" onclick="openModal('${section}', ${schedule})">Cambiar</button>
                        <div class="data-fields">
                            <div class="data-field">Nombre</div>
                            <div class="data-field">Ambiente</div>
                            <div class="data-field">Hora</div>
                        </div>
                    `;
                    
                    mainContent.appendChild(card);
                }
            }
        }

        // Function to filter schedules by section and schedule number
        function filterSchedules(section, schedule) {
            const cards = document.querySelectorAll('.schedule-card');
            
            cards.forEach(card => {
                if (section === card.dataset.section && schedule == card.dataset.schedule) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Initialize with all schedules visible
        window.onload = updateScheduleCards;
    </script> 
</body>
</html>